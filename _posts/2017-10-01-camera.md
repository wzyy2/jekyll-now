---
layout: post
title: Camera(Rockchip Linux)
category: [media]
tag: [EN]
---

# rockchip-isp1
Moved to wiki.

http://opensource.rock-chips.com/wiki_Rockchip-isp1


# 3A

对没有商业支持的客户来说，用内置的ISP跑3A是用不起来的。因为每一种批次的模组，都需要经过tuning，得到参数才能用，而这个tuning是需要排队的。
所以你只能把他当成一个bypass的mipi-csi host，使用自带isp的sensor模组。

当然出于学习目的，我们也可以尝试下自己利用内置ISP去写3A的算法。

# See also

http://www.360doc.com/content/16/1019/17/496343_599664458.shtml

# Tips

### sensor

调试sensor的技巧:

第一步是在rkisp1_mipi_isr里加中断, 确认mipi phy的信号有出来. mipi phy有信号, 可以验证以下事情: mipi phy/controler可以接收输入, sensor信号有了输出. 反之如果没有, 原因也就是这个两个, 可以用下面的命令来验证.

    io -4 -l 0x100 0xff911c00(rk3288)

出来的数据, 第2个部分代表mipi status, 多输入几次, 看看有没有变化, bit 8:11代表data lane0-3的stop state, bit12代表clock lane stop state.
如果有所的stop bit没变, 需要检查sensor是不是正确输出了, 如果只是clock lane, 需要看下sensor的clock lane是不是在s_stream前没在lp11模式.

第二步, 如果mipi_isr有中断了, 但是有sync_error的错误, 表示mipi接收的图像和isp配置的信息不一致, 可以有以下原因: mipi接收的图形大小和isp配置的不一致, mipi接收的信号有问题.  
第一个原因,检查下是不是sensor配置了1080p输出, 但是设置的软件size确是720p.  
第二个原因,检查下是不是bitrate设置的有问题, lane num设置的有问题, 硬件信号有问题.